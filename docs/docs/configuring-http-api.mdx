---
id: configuring-http-api
sidebar_label: Configuring the HTTP API
title: Configuring the HTTP API
---

## Using Rasa’s HTTP API

You can run a simple HTTP server that handles requests using your
trained Rasa model with:

```bash
rasa run -m models --enable-api --log-file out.log
```

All the endpoints this API exposes are documented in [HTTP API](../api/http-api).

The different parameters are:

* `-m`: the path to the folder containing your Rasa model,

* `--enable-api`: enable this additional API, and

* `--log-file`: the path to the log file.



:::caution
Make sure to secure your server, either by restricting access to the server (e.g. using firewalls), or
by enabling an authentication method: [Security Considerations](./configuring-http-api#server-security).

:::

:::note
If you start the server with an NLU-only model, not all the available endpoints
can be called. Be aware that some endpoints will return a 409 status code, as a trained
Core model is needed to process the request.

:::

:::note
By default, the HTTP server runs as a single process. You can change the number
of worker processes using the `SANIC_WORKERS` environment variable. It is
recommended that you set the number of workers to the number of available CPU cores
(check out the
[Sanic docs](https://sanic.readthedocs.io/en/latest/sanic/deploying.html#workers)
for more details). This will only work in combination with the
`RedisLockStore` (see [Lock Stores](../api/lock-stores)).

:::



<a aria-hidden="true" tabIndex="-1" className="anchor enhancedAnchor" id="server-ssl"></a>

## Configuring SSL / HTTPS

By default the Rasa server is using HTTP for its communication. To secure the
communication with SSL, you need to provide a valid certificate and the corresponding
private key file.

You can specify these files as part of the `rasa run` command:

```bash
rasa run --ssl-certificate myssl.crt --ssl-keyfile myssl.key
```

If you encrypted your keyfile with a password during creation, you need to add
this password to the command:

```bash
rasa run --ssl-certificate myssl.crt --ssl-keyfile myssl.key --ssl-password mypassword
```

<a aria-hidden="true" tabIndex="-1" className="anchor enhancedAnchor" id="server-security"></a>

## Security Considerations

We recommend to not expose the Rasa Server to the outside world, but
rather connect to it from your backend over a private connection (e.g.
between docker containers).

Nevertheless, there are two authentication methods built in:

**Token Based Auth:**

Pass in the token using `--auth-token thisismysecret` when starting
the server:

```bash
rasa run \
    -m models \
    --enable-api \
    --log-file out.log \
    --auth-token thisismysecret
```

Your requests should pass the token, in our case `thisismysecret`,
as a parameter:

```bash
$ curl -XGET localhost:5005/conversations/default/tracker?token=thisismysecret
```

**JWT Based Auth:**

Enable JWT based authentication using `--jwt-secret thisismysecret`.
Requests to the server need to contain a valid JWT token in
the `Authorization` header that is signed using this secret
and the `HS256` algorithm.

The token’s payload must contain an object under the `user` key,
which in turn must contain the `username` and `role` attributes.
If the `role` is `admin`, all endpoints are accessible.
If the `role` is `user`, endpoints with a `sender_id` parameter are only accessible
if the `sender_id` matches the payload’s `username` property.

```bash
rasa run \
    -m models \
    --enable-api \
    --log-file out.log \
    --jwt-secret thisismysecret
```

Your requests should have set a proper JWT header:

```text
"Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ"
                 "zdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIi"
                 "wiaWF0IjoxNTE2MjM5MDIyfQ.qdrr2_a7Sd80gmCWjnDomO"
                 "Gl8eZFVfKXA6jhncgRn-I"
```

The following is an example payload for a JWT token:

```json
{
    "user": {
        "username": "<sender_id>",
        "role": "user"
    }
}
```

To create and encode the token, you can use tools such as the [JWT Debugger](https://jwt.io/), or a Python module such as [PyJWT](https://pyjwt.readthedocs.io/en/latest/).
