---
id: analytics
sidebar_label: Analytics
title: Analytics
description:
abstract: Rasa Pro Analytics is a data pipeline that extracts model, training,
  and conversation data from the Rasa platform and streams the data to
  your data warehouse for analysis.
---

import useBaseUrl from "@docusaurus/useBaseUrl";
import RasaProLabel from "@theme/RasaProLabel";

<RasaProLabel />

:::tip Rasa Pro License
Rasa plus provides Enterprise-grade, flexible infrastructure and APIs,
on top of Rasa, for enterprise scale, complexity, and interoperability.

[Schedule a technical demo ->](https://info.rasa.com/rasa-technical-demo)
:::

You can query and
visualise metrics in a frontend tool of your choice (e.g. Metabase, PowerBI)

<div align="center">
  <img
    alt="Rasa Pro Analytics example dashboard"
    src={useBaseUrl("/img/analytics/analytics-examples.png")}
    width="100%"
  />
</div>

Measure the success of a Rasa assistant and making strategic investments
will lead to better business outcomes. It will also help you understand
the needs of your end users and better serve them.

<div align="center">
  <img
    alt="An overview over the components of Rasa Pro."
    src={useBaseUrl("/img/rasa_pro_overview.png")}
    width="100%"
  />
</div>

Rasa Pro will connect to your production assistant using Kafka. The
analytics will be computed as soon as the docker container is successfully
deployed and connected to your data warehouse and Kafka instances.

## Getting Started

### Connect an assistant

### Connect a data warehouse

### Ingest past conversations

When Analytics is conencted to your Kafka instance, it will consume
all prior events on the Kafka topic and ingest them into the database.
Kafka has a retention policy for events on a [topic which defaults to
7 days](https://docs.confluent.io/platform/current/installation/configuration/topic-configs.html#topicconfigs_retention.ms).

If you want to process events from conversations that are older than the
retention policy configured for the Rasa topic, you can manually
ingest events from past conversations.

Manually ingesting data of past conversations requires a connection to the
tracker store that contains the past conversations and a connection to the
Kafka cluster. The `rasa export` command can be used to export the events
stored in the tracker store to Kafka:

```shell
rasa export --endpoints endpoints.yml
```

The export needs to be configured to read from your production tracker store
and write to Kafka as an event broker, e.g.

```yaml-rasa title="endpoints.yml"
  tracker_store:
      type: SQL
      dialect: "postgresql"
      url: "localhost"
      db: "tracker"
      username: postgres
      password: password

  event_broker:
      type: kafka
      topic: rasa-events
      url: localhost:29092
      partition_by_sender: true
```

:::note

Running manuall ingestion of past events multiple times will result in
duplicated events. There is currently no deduplication implemented in
Analytics. Every event which gets ingested will be stored in the database,
even if it has been processed previously.
:::

### Connect a BI Solution

Connecting a business intelligence platform to the data warehouse varies for
each platform. We provide example instructions for Metabase and Tableau but
you can use any BI platform which supports AWS Redshift or PostgreSQL.

#### Example: Connecting Metabase

[Connecting Metabase to Redshift](https://www.metabase.com/data_sources/amazon-redshift)

#### Example: Connecting Tableau to Rasa Pro Analytics

[Connecting Tableau to Redshift](https://help.tableau.com/current/pro/desktop/en-us/examples_amazonredshift.htm)

## Example Queries

Inspiration on how to analyze the conversations your assistant is having. The
example queries are created using Metabase.

### Daily Chatbot Users

#### Query using SQL

```sql
SELECT CAST("public"."rasa_users"."FIRST_SEEN" AS date) AS "FIRST_SEEN", count(*) AS "count"
FROM "public"."rasa_users"
GROUP BY CAST("public"."rasa_users"."FIRST_SEEN" AS date)
ORDER BY CAST("public"."rasa_users"."FIRST_SEEN" AS date) ASC
```

#### Using the Metabase Query Builder

<div align="center">
  <img
    alt="Example query for a query showcasing the number of users per day."
    src={useBaseUrl("/img/analytics/number-of-users-query.png")}
    width="100%"
  />
</div>

#### Result

<div align="center">
  <img
    alt="Example result for a query showcasing the number of users per day."
    src={useBaseUrl("/img/analytics/number-of-users-result.png")}
    width="100%"
  />
</div>

## Data Structure

<div align="center">
  <img
    alt="An overview over the components of Rasa Pro."
    src={useBaseUrl("/img/analytics/analytics-db-schema.png")}
    width="100%"
  />
</div>

### Table `rasa_actions`

The `rasa_actions` table contains information about all actions that got
executed by the assistant across all conversations.

| Column | Type        | Description                                   |
| :----- | :---------- | :-------------------------------------------- |
| id     | varchar 255 | Unique ID of this event. Same as the event_id |
| ...    | ...         | ...                                           |

### Table `...`

## Architecture

:::warning
check if there is a better title
:::
